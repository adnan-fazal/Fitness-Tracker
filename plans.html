<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Weekly Workout Plans - Day by day workout schedule">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Fitness Tracker">
    
    <title>Workout Plans - Fitness Tracker</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="nav-icon">ðŸ’ª</span>
                <span class="nav-title">Fitness Tracker</span>
            </div>
            <button class="nav-toggle" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Dashboard</a></li>
                <li><a href="plans.html" class="nav-link active">Workout Plans</a></li>
                <li><a href="custom.html" class="nav-link">Custom Workouts</a></li>
                <li><a href="progress.html" class="nav-link">Progress</a></li>
            </ul>
            <button class="theme-toggle" aria-label="Toggle theme">
                <span class="theme-icon">ðŸŒ™</span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Page Header -->
        <section class="page-header">
            <h1 class="page-title">Weekly Workout Plans</h1>
            <p class="page-subtitle">Select a day to view your workout plan</p>
        </section>

        <!-- Day Navigation -->
        <section class="day-navigation">
            <div class="day-tabs">
                <button class="day-tab active" data-day="1">Day 1</button>
                <button class="day-tab" data-day="2">Day 2</button>
                <button class="day-tab" data-day="3">Day 3</button>
                <button class="day-tab" data-day="4">Day 4</button>
                <button class="day-tab" data-day="5">Day 5</button>
                <button class="day-tab" data-day="6">Day 6</button>
                <button class="day-tab" data-day="7">Day 7</button>
            </div>
        </section>

        <!-- Workout Plan Display -->
        <section class="workout-plan-section">
            <div class="workout-plan-header">
                <h2 class="workout-day-title" id="workoutDayTitle">Day 1 - Upper Body</h2>
                <div class="workout-day-stats">
                    <span class="stat-badge" id="totalExercises">0 exercises</span>
                    <span class="stat-badge" id="totalCalories">0 cal</span>
                    <span class="stat-badge" id="workoutDuration">0 min</span>
                </div>
            </div>

            <div class="workout-exercises" id="workoutExercises">
                <!-- Exercises will be loaded here -->
            </div>

            <div class="workout-actions">
                <button class="btn btn-primary btn-large" id="markAllComplete">
                    Mark All Complete
                </button>
                <button class="btn btn-secondary btn-large" id="addToToday">
                    Add to Today's Plan
                </button>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="js/workouts.js"></script>
    <script src="js/animations.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Initialize workout plans page
        let currentDay = 1;

        document.addEventListener('DOMContentLoaded', function() {
        // Load initial day from URL parameter or default to 1
        const urlParams = new URLSearchParams(window.location.search);
        const dayParam = urlParams.get('day');
        const initialDay = dayParam ? parseInt(dayParam) : 1;
        currentDay = initialDay;
        
        // Update active tab
        document.querySelectorAll('.day-tab').forEach(tab => {
            if (parseInt(tab.dataset.day) === initialDay) {
                tab.classList.add('active');
            }
        });
        
        loadWorkoutDay(initialDay);

            // Day tab navigation
            document.querySelectorAll('.day-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const day = parseInt(this.dataset.day);
                    currentDay = day;
                    
                    // Update active tab
                    document.querySelectorAll('.day-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Load workout for selected day
                    loadWorkoutDay(day);
                });
            });

            // Mark all complete button
            document.getElementById('markAllComplete').addEventListener('click', function() {
                markAllExercisesComplete(currentDay);
            });

            // Add to today's plan button
            document.getElementById('addToToday').addEventListener('click', function() {
                addWorkoutToToday(currentDay);
            });
        });

        function loadWorkoutDay(day) {
            const workout = WorkoutData.getWorkoutByDay(day);
            if (!workout) {
                document.getElementById('workoutExercises').innerHTML = 
                    '<div class="empty-state">No workout planned for this day.</div>';
                return;
            }

            // Update header
            document.getElementById('workoutDayTitle').textContent = `Day ${day} - ${workout.name}`;
            
            // Calculate stats
            const totalExercises = workout.exercises.length;
            const totalCalories = workout.exercises.reduce((sum, ex) => sum + (ex.calories || 0), 0);
            const totalDuration = workout.exercises.reduce((sum, ex) => {
                if (ex.duration) {
                    const match = ex.duration.match(/(\d+)/);
                    return sum + (match ? parseInt(match[1]) : 0);
                }
                return sum;
            }, 0);

            document.getElementById('totalExercises').textContent = `${totalExercises} exercises`;
            document.getElementById('totalCalories').textContent = `${totalCalories} cal`;
            document.getElementById('workoutDuration').textContent = `${totalDuration} min`;

            // Display exercises
            const exercisesContainer = document.getElementById('workoutExercises');
            exercisesContainer.innerHTML = workout.exercises.map((exercise, index) => {
                const isCompleted = WorkoutData.isExerciseCompleted(day, index);
                return `
                    <div class="exercise-card ${isCompleted ? 'completed' : ''}" data-day="${day}" data-index="${index}">
                        <div class="exercise-header">
                            <h3 class="exercise-name">${exercise.name}</h3>
                            <label class="exercise-checkbox">
                                <input type="checkbox" ${isCompleted ? 'checked' : ''} 
                                       onchange="toggleExercise(${day}, ${index})">
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="exercise-details">
                            <div class="exercise-detail">
                                <span class="detail-label">Sets:</span>
                                <span class="detail-value">${exercise.sets || 'N/A'}</span>
                            </div>
                            <div class="exercise-detail">
                                <span class="detail-label">Reps/Duration:</span>
                                <span class="detail-value">${exercise.reps || exercise.duration || 'N/A'}</span>
                            </div>
                            <div class="exercise-detail">
                                <span class="detail-label">Calories:</span>
                                <span class="detail-value">${exercise.calories || 0} cal</span>
                            </div>
                        </div>
                        ${exercise.notes ? `<p class="exercise-notes">${exercise.notes}</p>` : ''}
                    </div>
                `;
            }).join('');
        }

        function toggleExercise(day, index) {
            WorkoutData.toggleExerciseCompletion(day, index);
            loadWorkoutDay(day);
            
            // Update dashboard if on same day as today
            if (typeof updateDashboard === 'function') {
                updateDashboard();
            }
        }

        function markAllExercisesComplete(day) {
            const workout = WorkoutData.getWorkoutByDay(day);
            if (!workout) return;

            workout.exercises.forEach((_, index) => {
                WorkoutData.markExerciseComplete(day, index);
            });
            
            loadWorkoutDay(day);
            
            // Show success message
            showNotification('All exercises marked as complete!', 'success');
        }

        function addWorkoutToToday(day) {
            WorkoutData.addWorkoutToToday(day);
            showNotification('Workout added to today\'s plan!', 'success');
        }

        function showNotification(message, type = 'info') {
            // Simple notification implementation
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                padding: 1rem 1.5rem;
                background: var(--primary-color);
                color: white;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Make functions available globally
        window.toggleExercise = toggleExercise;
    </script>
</body>
</html>

